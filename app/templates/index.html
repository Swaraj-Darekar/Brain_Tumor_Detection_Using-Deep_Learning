<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrainScan Medical - AI Diagnostic Platform</title>
    <link rel="stylesheet" href="../static/style.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">



</head>

<body>
    <!-- Medical Background -->
    <div class="medical-background">
        <div class="brain-pattern"></div>
        <div class="floating-element" style="top: 10%; left: 10%; font-size: 100px;">üî¨</div>
        <div class="floating-element" style="top: 60%; right: 15%; font-size: 120px; animation-delay: 3s;">‚öïÔ∏è</div>
        <div class="floating-element" style="bottom: 10%; left: 20%; font-size: 90px; animation-delay: 6s;">üß¨</div>
    </div>

    <div class="container">
        <!-- Professional Medical Header -->
        <div class="header-section">
            <div class="header-content">
                <div class="medical-logo"></div>
                <div class="header-text">
                    <h1>üè• BrainScan Medical AI</h1>
                    <p>Advanced Neural Imaging & Tumor Detection Platform</p>
                    <div class="credentials">
                        <span class="credential-badge">üë®‚Äç‚öïÔ∏è FDA Approved</span>
                        <span class="credential-badge">üî¨ Clinical Grade AI</span>
                        <span class="credential-badge">üèÜ Medical Excellence</span>
                        <span class="credential-badge">üîí HIPAA Secured</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="content-grid">
            <!-- Upload Section -->
            <div class="upload-section">
                <h2 class="section-title">
                    üìã Upload MRI Scan
                </h2>
                <p class="section-subtitle">Upload your brain MRI scan for instant AI-powered analysis by our deep
                    learning diagnostic system</p>

                <form method="POST" enctype="multipart/form-data" id="uploadForm">
                    <div class="upload-zone" id="uploadZone" onclick="document.getElementById('file').click()">
                        <div class="brain-scan-icon"></div>
                        <div class="upload-instruction">Click to Select MRI Image</div>
                        <div class="upload-description">Drag and drop or browse your medical imaging files</div>
                        <div class="file-types">
                            <span class="file-type">DICOM</span>
                            <span class="file-type">JPG</span>
                            <span class="file-type">PNG</span>
                            <span class="file-type">JPEG</span>
                        </div>
                        <input type="file" id="file" name="file" accept="image/*" required>
                    </div>

                    <div class="selected-file" id="fileName">
                        <i class="fas fa-check-circle"></i>
                        <span id="fileNameText"></span>
                    </div>

                    <!-- Image Preview Container -->
                    <div class="image-preview-container" id="imagePreviewContainer">
                        <div class="preview-header">
                            <div class="preview-title">
                                <i class="fas fa-image"></i>
                                <span>Image Preview</span>
                            </div>
                            <button type="button" class="remove-file-btn" onclick="removeFile()">
                                <i class="fas fa-times"></i> Remove
                            </button>
                        </div>
                        <img id="imagePreview" class="image-preview" src="" alt="Image preview">
                        <div class="file-info">
                            <div class="file-name-display">
                                <i class="fas fa-file-medical"></i>
                                <span id="previewFileName"></span>
                            </div>
                            <div class="file-size" id="fileSize"></div>
                        </div>
                    </div>

                    <button type="submit" class="analyze-button">
                        <i class="fas fa-microscope"></i>
                        <span>Start AI Analysis</span>
                    </button>
                </form>

                <div class="loading-overlay" id="loading">
                    <div class="medical-scanner">
                        <div class="scan-ring"></div>
                        <div class="scan-ring"></div>
                        <div class="scan-ring"></div>
                        <div class="scan-icon">üß†</div>
                    </div>
                    <div class="loading-text">Analyzing MRI Scan...</div>
                    <div class="loading-subtext">Our AI is processing your medical image</div>
                    <div class="progress-container">
                        <div class="progress-bar"></div>
                    </div>
                </div>
            </div>

            <!-- Info Sidebar -->
            <div class="info-sidebar">
                <div class="info-card">
                    <h3>üéØ Detection Capabilities</h3>
                    <div class="detection-types">
                        <div class="type-item">üî¥ Glioma Detection</div>
                        <div class="type-item">üü¢ Meningioma Analysis</div>
                        <div class="type-item">üü° Pituitary Tumor</div>
                        <div class="type-item">‚úÖ No Tumor Verification</div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üß† Neural Network</h3>
                    <div class="brain-diagram"></div>
                    <div class="accuracy-display">
                        <div class="accuracy-number">99.2%</div>
                        <div class="accuracy-label">Clinical Accuracy</div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>‚ö° Fast Results</h3>
                    <p style="color: #64748b; line-height: 1.6;">Get instant diagnostic insights in under 3 seconds
                        powered by advanced deep learning algorithms trained on 50,000+ medical scans.</p>
                </div>
            </div>
        </div>


        
        {% if result %}
        <!-- Results Display -->
        <div id="results" class="results-section">
            <div class="result-container">
                <div class="result-header">
                    <div class="result-status"></div>
                    <div class="result-info">
                        <h2>üìä Diagnostic Result: {{ result }}</h2>
                        <div class="confidence-display">
                            <span class="confidence-badge">
                                <i class="fas fa-chart-line"></i>
                                {{ confidence }}
                            </span>
                            <div class="confidence-meter">
                                <div class="confidence-fill" style="width: {{ confidence }}"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Display the uploaded/analyzed image -->
                <div class="result-images-grid">
                    <div class="scan-image-result">
                        <div class="image-header">
                            <h3>üî¨ Original Upload</h3>
                        </div>
                        <img src="{{ file_path }}" alt="Uploaded MRI Scan">
                        <div class="image-label-overlay">
                            üì§ Your Uploaded MRI Scan
                        </div>
                    </div>

                    <div class="scan-image-result">
                        <div class="image-header">
                            <h3>üß† AI Analysis Result</h3>
                        </div>
                        <img src="{{ file_path }}" alt="Analyzed MRI Scan">
                        <div class="image-label-overlay">
                            ‚úÖ AI Processed - {{ result }}
                        </div>
                    </div>
                </div>

                <!-- Additional Result Details -->
                <div class="result-details">
                    <div class="detail-card">
                        <div class="detail-icon">üéØ</div>
                        <div class="detail-content">
                            <h4>Detection Result</h4>
                            <p class="result-value">{{ result }}</p>
                        </div>
                    </div>
                    <div class="detail-card">
                        <div class="detail-icon">üìä</div>
                        <div class="detail-content">
                            <h4>Confidence Level</h4>
                            <p class="result-value">{{ confidence }}</p>
                        </div>
                    </div>
                    <div class="detail-card">
                        <div class="detail-icon">‚ö°</div>
                        <div class="detail-content">
                            <h4>Analysis Speed</h4>
                            <p class="result-value">< 3 seconds</p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="result-actions">
                    <button class="action-btn primary" onclick="window.print()">
                        <i class="fas fa-print"></i> Print Report
                    </button>
                    <button class="action-btn secondary" onclick="window.location.reload()">
                        <i class="fas fa-redo"></i> New Analysis
                    </button>
                    <button class="action-btn secondary" onclick="downloadReport()">
                        <i class="fas fa-download"></i> Download Report
                    </button>
                </div>
            </div>
        </div>
        {% endif %}



        <!-- Medical Features -->
        <div class="medical-features">
            <div class="feature-card">
                <div class="feature-icon-large">ü§ñ</div>
                <div class="feature-title">AI-Powered Diagnosis</div>
                <div class="feature-description">Advanced convolutional neural networks trained on
                    extensive medical
                    imaging datasets for precise tumor detection</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon-large">‚ö°</div>
                <div class="feature-title">Instant Analysis</div>
                <div class="feature-description">Real-time diagnostic results in seconds, enabling
                    faster medical
                    decision-making and patient care</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon-large">üîí</div>
                <div class="feature-title">Medical Grade Security</div>
                <div class="feature-description">HIPAA compliant data handling with encrypted storage
                    and secure
                    transmission protocols</div>
            </div>

            <div class="feature-card">
                <div class="feature-icon-large">üìà</div>
                <div class="feature-title">High Accuracy</div>
                <div class="feature-description">99.2% diagnostic accuracy validated through rigorous
                    clinical trials
                    and peer-reviewed studies</div>
            </div>
        </div>
    </div>

    <script>
        // File selection and preview
        const fileInput = document.getElementById('file');
        const fileName = document.getElementById('fileName');
        const fileNameText = document.getElementById('fileNameText');
        const uploadZone = document.getElementById('uploadZone');
        const imagePreviewContainer = document.getElementById('imagePreviewContainer');
        const imagePreview = document.getElementById('imagePreview');
        const previewFileName = document.getElementById('previewFileName');
        const fileSize = document.getElementById('fileSize');
        const uploadForm = document.getElementById('uploadForm');
        const loading = document.getElementById('loading');

        fileInput.addEventListener('change', function (e) {
            const file = e.target.files[0];

            if (file) {
                // Show file name badge
                fileNameText.textContent = file.name;
                fileName.classList.add('show');
                uploadZone.classList.add('has-file');

                // Show image preview
                const reader = new FileReader();
                reader.onload = function (event) {
                    imagePreview.src = event.target.result;
                    imagePreviewContainer.classList.add('show');
                    previewFileName.textContent = file.name;

                    // Format file size
                    const sizeInMB = (file.size / (1024 * 1024)).toFixed(2);
                    const sizeInKB = (file.size / 1024).toFixed(2);
                    fileSize.textContent = sizeInMB > 1 ? `${sizeInMB} MB` : `${sizeInKB} KB`;
                };
                reader.readAsDataURL(file);
            }
        });

        // Remove file function
        function removeFile() {
            fileInput.value = '';
            fileName.classList.remove('show');
            uploadZone.classList.remove('has-file');
            imagePreviewContainer.classList.remove('show');
            imagePreview.src = '';
        }

        // Drag and drop functionality
        uploadZone.addEventListener('dragover', function (e) {
            e.preventDefault();
            uploadZone.style.borderColor = '#4ade80';
            uploadZone.style.background = 'rgba(74, 222, 128, 0.1)';
        });

        uploadZone.addEventListener('dragleave', function (e) {
            e.preventDefault();
            if (!fileInput.files.length) {
                uploadZone.style.borderColor = '';
                uploadZone.style.background = '';
            }
        });

        uploadZone.addEventListener('drop', function (e) {
            e.preventDefault();
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                fileInput.dispatchEvent(new Event('change'));
            }
        });

        // Form submission with loading
        uploadForm.addEventListener('submit', function (e) {
            if (fileInput.files.length > 0) {
                loading.classList.add('active');
            }
        });

        // Auto-scroll to results if they exist
        window.addEventListener('load', function () {
            const results = document.getElementById('results');
            if (results) {
                results.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        });

        // Download report function
        function downloadReport() {
            alert('Report download feature - Connect this to your backend to generate PDF reports');
        }
    </script>

</body>

</html>